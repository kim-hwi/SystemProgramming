MAIN	START	1000
INLOOP	TD	INDEV
	JEQ	INLOOP
	RD	INDEV
	STA	CASE
	RD	INDEV
	COMP	ASEN
	LDX	#1
	LDT	CASE
	JEQ 	LOOP
	

LOOP	TD	INDEV2
	JEQ	LOOP
	RD	INDEV2
	ADD
	STA	STACK,X
	.LDA	#STACK
	.ADD	#3
	.STA	#STACK
	RD	INDEV
	COMP	ASEN
	JEQ 	LOOP
	TIXR	T
	JLT	LOOP


INDEV	BYTE	0
INDEV2	BYTE	0
CASE	RESW	1
STACK	RESW	10	
ASEN	WORD	10

MAIN	START	1000
INLOOP	TD	INDEV
	JEQ	INLOOP
	RD	INDEV
	SUB	#48
	STA	CASE
	RD	INDEV
	COMP	ASEN
	LDX	#1
	LDT	CASE
	LDA	#STACK
	STA	POINTER
	JEQ 	LOOP
	

LOOP	LDA	#0
	TD	INDEV2
	JEQ	LOOP
	RD	INDEV2
	SUB	#48
	COMP	#0
	JEQ	POP
	
	STCH	@POINTER
	LDA	POINTER
	ADD	#1
	STA	POINTER
	LDA	#0
	RD	INDEV2
	TIX	CASE
	JGT	FINLOOP
	COMP	ASEN
	JEQ 	LOOP
	
POP	RD	INDEV2
	TIX	CASE
	LDA	POINTER
	SUB	#1
	STA	POINTER
	LDA	#0
	STA	@POINTER
	JGT	FINLOOP
	J	LOOP		

FINLOOP	LDX	#0
	LDA	#0
STOP	LDCH	STACK,X
	TIX	CASE
	ADD	RES
	STA	RES
	JLT	STOP
	JEQ	FIN

FIN	TD	OUTDEV
	JEQ	FIN
	.LDCH	RES
	ADD	#48
	WD	OUTDEV
	TIX	CASE
	JLT	FIN

POINTER	RESW	1
INDEV	BYTE	0
INDEV2	BYTE	0
CASE	RESW	1
STACK	RESB	10	
ASEN	WORD	10
RES	WORD	0
OUTDEV	BYTE	1
	